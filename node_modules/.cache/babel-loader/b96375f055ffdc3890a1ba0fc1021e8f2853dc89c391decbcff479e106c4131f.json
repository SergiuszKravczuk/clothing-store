{"ast":null,"code":"import _objectSpread from\"/home/serhii/Documents/Projects/clothing-store/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/serhii/Documents/Projects/clothing-store/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/serhii/Documents/Projects/clothing-store/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{initializeApp}from\"firebase/app\";import{getAuth,signInWithRedirect,signInWithPopup,GoogleAuthProvider,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged}from\"firebase/auth\";import{getFirestore,doc,getDoc,setDoc,collection,writeBatch,query,getDocs}from\"firebase/firestore\";// firebase configuration\nvar firebaseConfig={apiKey:\"AIzaSyCbXgGdBoXHdYa0ILPCjJaBNU42WWnF8Rk\",authDomain:\"clothing-store-6b913.firebaseapp.com\",projectId:\"clothing-store-6b913\",storageBucket:\"clothing-store-6b913.appspot.com\",messagingSenderId:\"788479369479\",appId:\"1:788479369479:web:2fde8ed0902e71915525a2\",measurementId:\"G-FHCR6SWCQP\"};var firebaseApp=initializeApp(firebaseConfig);export var auth=getAuth();export var db=getFirestore();// ==========================\n// Providers\nvar googleProvider=new GoogleAuthProvider();googleProvider.setCustomParameters({prompt:\"select_account\"});export var signInWithGooglePopup=function signInWithGooglePopup(){return signInWithPopup(auth,googleProvider);};export var signInWithGoogleRedirect=function signInWithGoogleRedirect(){return signInWithRedirect(auth,googleProvider);};// =====================\n// db connection\n// setter\nexport var addCollectionAndDocuments=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(collectionKey,objectsToAdd){var collectionRef,bath;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:collectionRef=collection(db,collectionKey);bath=writeBatch(db);objectsToAdd.forEach(function(object){var docRef=doc(collectionRef,object.title.toLowerCase());bath.set(docRef,object);});_context.next=5;return bath.commit();case 5:console.log(\"done\");case 6:case\"end\":return _context.stop();}},_callee);}));return function addCollectionAndDocuments(_x,_x2){return _ref.apply(this,arguments);};}();// getter\nexport var getCategoriesAndDocuments=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var collectionRef,q,querySnapshot,categoryMap;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:collectionRef=collection(db,\"categories\");q=query(collectionRef);_context2.next=4;return getDocs(q);case 4:querySnapshot=_context2.sent;categoryMap=querySnapshot.docs.reduce(function(acc,docSnapshot){var _docSnapshot$data=docSnapshot.data(),title=_docSnapshot$data.title,items=_docSnapshot$data.items;acc[title.toLowerCase()]=items;return acc;},{});return _context2.abrupt(\"return\",categoryMap);case 7:case\"end\":return _context2.stop();}},_callee2);}));return function getCategoriesAndDocuments(){return _ref2.apply(this,arguments);};}();// =============\n// create User\nexport var createUserDocumentFromAuth=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(userAuth){var additionalInformation,userDocRef,userSnapshot,displayName,email,createAt,_args3=arguments;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:additionalInformation=_args3.length>1&&_args3[1]!==undefined?_args3[1]:{};if(userAuth){_context3.next=3;break;}return _context3.abrupt(\"return\");case 3:userDocRef=doc(db,\"users\",userAuth.uid);_context3.next=6;return getDoc(userDocRef);case 6:userSnapshot=_context3.sent;if(userSnapshot.exists()){_context3.next=18;break;}displayName=userAuth.displayName,email=userAuth.email;createAt=new Date();_context3.prev=10;_context3.next=13;return setDoc(userDocRef,_objectSpread({displayName:displayName,email:email,createAt:createAt},additionalInformation));case 13:_context3.next=18;break;case 15:_context3.prev=15;_context3.t0=_context3[\"catch\"](10);console.log(\"error creating user!\",_context3.t0.message);case 18:return _context3.abrupt(\"return\",userDocRef);case 19:case\"end\":return _context3.stop();}},_callee3,null,[[10,15]]);}));return function createUserDocumentFromAuth(_x3){return _ref3.apply(this,arguments);};}();export var createAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(email,password){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!(!email||!password)){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:_context4.next=4;return createUserWithEmailAndPassword(auth,email,password);case 4:return _context4.abrupt(\"return\",_context4.sent);case 5:case\"end\":return _context4.stop();}},_callee4);}));return function createAuthUserWithEmailAndPassword(_x4,_x5){return _ref4.apply(this,arguments);};}();// ===================\n// sign in users\nexport var signInAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(email,password){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!(!email||!password)){_context5.next=2;break;}return _context5.abrupt(\"return\");case 2:_context5.next=4;return signInWithEmailAndPassword(auth,email,password);case 4:return _context5.abrupt(\"return\",_context5.sent);case 5:case\"end\":return _context5.stop();}},_callee5);}));return function signInAuthUserWithEmailAndPassword(_x6,_x7){return _ref5.apply(this,arguments);};}();export var signOutUser=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return signOut(auth);case 2:return _context6.abrupt(\"return\",_context6.sent);case 3:case\"end\":return _context6.stop();}},_callee6);}));return function signOutUser(){return _ref6.apply(this,arguments);};}();export var onAuthStateChangedListener=function onAuthStateChangedListener(callback){return onAuthStateChanged(auth,callback);};//  ================","map":{"version":3,"names":["initializeApp","getAuth","signInWithRedirect","signInWithPopup","GoogleAuthProvider","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","getFirestore","doc","getDoc","setDoc","collection","writeBatch","query","getDocs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","auth","db","googleProvider","setCustomParameters","prompt","signInWithGooglePopup","signInWithGoogleRedirect","addCollectionAndDocuments","collectionKey","objectsToAdd","collectionRef","bath","forEach","object","docRef","title","toLowerCase","set","commit","console","log","getCategoriesAndDocuments","q","querySnapshot","categoryMap","docs","reduce","acc","docSnapshot","data","items","createUserDocumentFromAuth","userAuth","additionalInformation","userDocRef","uid","userSnapshot","exists","displayName","email","createAt","Date","message","createAuthUserWithEmailAndPassword","password","signInAuthUserWithEmailAndPassword","signOutUser","onAuthStateChangedListener","callback"],"sources":["/home/serhii/Documents/Projects/clothing-store/src/utils/firebase/firebase.utils.jsx"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport {\n  getAuth,\n  signInWithRedirect,\n  signInWithPopup,\n  GoogleAuthProvider,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut,\n  onAuthStateChanged,\n} from \"firebase/auth\";\nimport {\n  getFirestore,\n  doc,\n  getDoc,\n  setDoc,\n  collection,\n  writeBatch,\n  query,\n  getDocs,\n} from \"firebase/firestore\";\n\n// firebase configuration\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCbXgGdBoXHdYa0ILPCjJaBNU42WWnF8Rk\",\n\n  authDomain: \"clothing-store-6b913.firebaseapp.com\",\n\n  projectId: \"clothing-store-6b913\",\n\n  storageBucket: \"clothing-store-6b913.appspot.com\",\n\n  messagingSenderId: \"788479369479\",\n\n  appId: \"1:788479369479:web:2fde8ed0902e71915525a2\",\n\n  measurementId: \"G-FHCR6SWCQP\",\n};\n\nconst firebaseApp = initializeApp(firebaseConfig);\n\nexport const auth = getAuth();\nexport const db = getFirestore();\n\n// ==========================\n\n// Providers\n\nconst googleProvider = new GoogleAuthProvider();\n\ngoogleProvider.setCustomParameters({\n  prompt: \"select_account\",\n});\n\nexport const signInWithGooglePopup = () =>\n  signInWithPopup(auth, googleProvider);\n\nexport const signInWithGoogleRedirect = () =>\n  signInWithRedirect(auth, googleProvider);\n\n// =====================\n\n// db connection\n\n// setter\n\nexport const addCollectionAndDocuments = async (\n  collectionKey,\n  objectsToAdd\n) => {\n  const collectionRef = collection(db, collectionKey);\n  const bath = writeBatch(db);\n\n  objectsToAdd.forEach((object) => {\n    const docRef = doc(collectionRef, object.title.toLowerCase());\n    bath.set(docRef, object);\n  });\n\n  await bath.commit();\n  console.log(\"done\");\n};\n\n// getter\nexport const getCategoriesAndDocuments = async () => {\n  const collectionRef = collection(db, \"categories\");\n  const q = query(collectionRef);\n\n  const querySnapshot = await getDocs(q);\n\n  const categoryMap = querySnapshot.docs.reduce((acc, docSnapshot) => {\n    const { title, items } = docSnapshot.data();\n    acc[title.toLowerCase()] = items;\n    return acc;\n  }, {});\n\n  return categoryMap;\n};\n\n// =============\n\n// create User\nexport const createUserDocumentFromAuth = async (\n  userAuth,\n  additionalInformation = {}\n) => {\n  if (!userAuth) return;\n\n  const userDocRef = doc(db, \"users\", userAuth.uid);\n\n  const userSnapshot = await getDoc(userDocRef);\n  if (!userSnapshot.exists()) {\n    const { displayName, email } = userAuth;\n    const createAt = new Date();\n\n    try {\n      await setDoc(userDocRef, {\n        displayName,\n        email,\n        createAt,\n        ...additionalInformation,\n      });\n    } catch (error) {\n      console.log(\"error creating user!\", error.message);\n    }\n  }\n\n  return userDocRef;\n};\n\nexport const createAuthUserWithEmailAndPassword = async (email, password) => {\n  if (!email || !password) return;\n  return await createUserWithEmailAndPassword(auth, email, password);\n};\n\n// ===================\n\n// sign in users\n\nexport const signInAuthUserWithEmailAndPassword = async (email, password) => {\n  if (!email || !password) return;\n  return await signInWithEmailAndPassword(auth, email, password);\n};\n\nexport const signOutUser = async () => await signOut(auth);\n\nexport const onAuthStateChangedListener = (callback) =>\n  onAuthStateChanged(auth, callback);\n\n//  ================\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}