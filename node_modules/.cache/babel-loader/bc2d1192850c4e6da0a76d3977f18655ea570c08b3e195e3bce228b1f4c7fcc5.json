{"ast":null,"code":"import _regeneratorRuntime from\"/home/serhii/Documents/Projects/clothing-store/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/serhii/Documents/Projects/clothing-store/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/serhii/Documents/Projects/clothing-store/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/serhii/Documents/Projects/clothing-store/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/serhii/Documents/Projects/clothing-store/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{createAuthUserWithEmailAndPassword,createUserDocumentFromAuth}from\"../../utils/firebase/firebase.utils\";import FormInput from\"../form-input/form-input.component\";import Button from\"../button/button.component\";import{SignUpContainer}from\"./sign-up.style\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var defaultFormFields={displayName:\"\",email:\"\",password:\"\",confirmPassword:\"\"};var SignUpForm=function SignUpForm(){var _useState=useState(defaultFormFields),_useState2=_slicedToArray(_useState,2),formFields=_useState2[0],setFormFields=_useState2[1];var displayName=formFields.displayName,email=formFields.email,password=formFields.password,confirmPassword=formFields.confirmPassword;var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setFormFields(_objectSpread(_objectSpread({},formFields),{},_defineProperty({},name,value)));};var resetFormFields=function resetFormFields(){setFormFields(defaultFormFields);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$createAuthUser,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(password!==confirmPassword)){_context.next=4;break;}alert(\"Passwords do not match\");return _context.abrupt(\"return\");case 4:if(password.length<6||confirmPassword<6){alert(\"password needs be longer then 6 chars\");}_context.prev=5;_context.next=8;return createAuthUserWithEmailAndPassword(email,password);case 8:_yield$createAuthUser=_context.sent;user=_yield$createAuthUser.user;_context.next=12;return createUserDocumentFromAuth(user,{displayName:displayName});case 12:_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](5);if(_context.t0.code===\"auth/email-already-in-use\"){alert(\"Cannot create user, email alreade in use\");}else{console.log(\"User creation encoutered an error\\\"\".concat(_context.t0));}case 17:resetFormFields();case 18:case\"end\":return _context.stop();}},_callee,null,[[5,14]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(SignUpContainer,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Don't have an account?\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Sign up with your email and password\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(FormInput,{label:\"Display name\",required:true,type:\"text\",onChange:handleChange,name:\"displayName\",value:displayName}),/*#__PURE__*/_jsx(FormInput,{label:\"Email\",required:true,type:\"email\",onChange:handleChange,name:\"email\",value:email}),/*#__PURE__*/_jsx(FormInput,{label:\"Password\",required:true,type:\"password\",onChange:handleChange,name:\"password\",value:password}),/*#__PURE__*/_jsx(FormInput,{label:\"Confirm password\",required:true,type:\"password\",onChange:handleChange,name:\"confirmPassword\",value:confirmPassword}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Sign up\"})]})]});};export default SignUpForm;","map":{"version":3,"names":["useState","createAuthUserWithEmailAndPassword","createUserDocumentFromAuth","FormInput","Button","SignUpContainer","defaultFormFields","displayName","email","password","confirmPassword","SignUpForm","formFields","setFormFields","handleChange","event","target","name","value","resetFormFields","handleSubmit","preventDefault","alert","length","user","code","console","log"],"sources":["/home/serhii/Documents/Projects/clothing-store/src/components/sign-up-form/sign-up-form.component.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport {\n  createAuthUserWithEmailAndPassword,\n  createUserDocumentFromAuth,\n} from \"../../utils/firebase/firebase.utils\";\nimport FormInput from \"../form-input/form-input.component\";\nimport Button from \"../button/button.component\";\nimport { SignUpContainer } from \"./sign-up.style\";\n\nconst defaultFormFields = {\n  displayName: \"\",\n  email: \"\",\n  password: \"\",\n  confirmPassword: \"\",\n};\n\nconst SignUpForm = () => {\n  const [formFields, setFormFields] = useState(defaultFormFields);\n  const { displayName, email, password, confirmPassword } = formFields;\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setFormFields({ ...formFields, [name]: value });\n  };\n\n  const resetFormFields = () => {\n    setFormFields(defaultFormFields);\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    if (password !== confirmPassword) {\n      alert(\"Passwords do not match\");\n      return;\n    }\n    if (password.length < 6 || confirmPassword < 6) {\n      alert(\"password needs be longer then 6 chars\");\n    }\n\n    try {\n      const { user } = await createAuthUserWithEmailAndPassword(\n        email,\n        password\n      );\n      await createUserDocumentFromAuth(user, { displayName });\n    } catch (error) {\n      if (error.code === \"auth/email-already-in-use\") {\n        alert(\"Cannot create user, email alreade in use\");\n      } else {\n        console.log(`User creation encoutered an error\"${error}`);\n      }\n    }\n    resetFormFields();\n  };\n\n  return (\n    <SignUpContainer>\n      <h2>Don't have an account?</h2>\n      <span>Sign up with your email and password</span>\n      <form onSubmit={handleSubmit}>\n        <FormInput\n          label=\"Display name\"\n          required\n          type=\"text\"\n          onChange={handleChange}\n          name=\"displayName\"\n          value={displayName}\n        />\n\n        <FormInput\n          label=\"Email\"\n          required\n          type=\"email\"\n          onChange={handleChange}\n          name=\"email\"\n          value={email}\n        />\n\n        <FormInput\n          label=\"Password\"\n          required\n          type=\"password\"\n          onChange={handleChange}\n          name=\"password\"\n          value={password}\n        />\n\n        <FormInput\n          label=\"Confirm password\"\n          required\n          type=\"password\"\n          onChange={handleChange}\n          name=\"confirmPassword\"\n          value={confirmPassword}\n        />\n        <Button type=\"submit\">Sign up</Button>\n      </form>\n    </SignUpContainer>\n  );\n};\n\nexport default SignUpForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}